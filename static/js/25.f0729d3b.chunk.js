(this["webpackJsonppancake-frontend"]=this["webpackJsonppancake-frontend"]||[]).push([[25],{1701:function(e,t,n){"use strict";n.r(t);var c,r,a,i,o,s,u,l=n(1),b=n(44),d=n(87),j=n(223),f=n(305),p=n(434),O=n(902),m=n(105),x=n(820),h=n(9),v=n(6),g=n(2),k=n(13),S=n(3),y=n.n(S),C=n(10),w=n(8),I=n(5),A=n(40),E=n(166),N=Object(E.parseUnits)("1"),P=Object(E.parseUnits)("0.5"),G=["5","6","7","8","9"],T=n(0),D=N.add(P),L=D.mul(5),_={isInitialized:!1,currentStep:0,teamId:null,selectedNft:{collectionAddress:null,tokenId:null},userName:"",minimumCakeRequired:D,allowance:L},M=function(e,t){switch(t.type){case"initialize":return Object(I.a)(Object(I.a)({},e),{},{isInitialized:!0,currentStep:t.step});case"next_step":return Object(I.a)(Object(I.a)({},e),{},{currentStep:e.currentStep+1});case"set_team":return Object(I.a)(Object(I.a)({},e),{},{teamId:t.teamId});case"set_selected_nft":return Object(I.a)(Object(I.a)({},e),{},{selectedNft:{tokenId:t.tokenId,collectionAddress:t.collectionAddress}});case"set_username":return Object(I.a)(Object(I.a)({},e),{},{userName:t.userName});default:return e}},F=Object(l.createContext)(null),R=function(e){var t=e.children,n=Object(l.useReducer)(M,_),c=Object(w.a)(n,2),r=c[0],a=c[1],i=Object(b.c)().account;Object(l.useEffect)((function(){var e=!0;return i&&function(){var t=Object(C.a)(y.a.mark((function t(){var n,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(A.c)(),t.next=3,n.canMint(i);case 3:c=t.sent,a({type:"initialize",step:c?0:1}),e&&a({type:"initialize",step:c?0:1});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}}),[i,a]);var o=Object(l.useMemo)((function(){return{nextStep:function(){return a({type:"next_step"})},setTeamId:function(e){return a({type:"set_team",teamId:e})},setSelectedNft:function(e,t){return a({type:"set_selected_nft",tokenId:e,collectionAddress:t})},setUserName:function(e){return a({type:"set_username",userName:e})}}}),[a]);return Object(T.jsx)(F.Provider,{value:Object(I.a)(Object(I.a)({},r),{},{actions:o}),children:t})},q=v.e.div(c||(c=Object(h.a)(["\n  border-bottom: 2px solid ",";\n  margin-top: 32px;\n  margin-bottom: 24px;\n  padding-bottom: 24px;\n"])),(function(e){return e.theme.colors.textSubtle})),z=["Get Starter Collectible","Set Profile Picture","Join Team","Set Name"],U=function(){var e=Object(k.b)().t,t=Object(l.useContext)(F).currentStep;return Object(T.jsxs)(q,{children:[Object(T.jsx)(g.gb,{as:"h1",scale:"xxl",color:"secondary",mb:"8px",id:"profile-setup-title",children:e("Profile Setup")}),Object(T.jsx)(g.gb,{as:"h2",scale:"lg",mb:"8px",children:e("Show off your stats and collectibles with your unique profile")}),Object(T.jsx)(g.Gc,{color:"textSubtle",mb:"8px",children:e("Total cost: 1.5 PCM")}),Object(T.jsx)(g.ub,{href:"".concat(m.a,"/profile"),children:Object(T.jsx)(g.v,{mb:"24px",scale:"sm",variant:"secondary",children:e("Back to profile")})}),Object(T.jsx)(g.r,{children:z.map((function(n,c){return Object(T.jsx)(g.Gc,{color:c<=t?"text":"textDisabled",children:e(n)},n)}))})]})},B=n(116),W=function(){var e=Object(k.b)().t;return Object(T.jsxs)("div",{children:[Object(T.jsx)(g.gb,{scale:"xl",mb:"8px",children:e("Oops!")}),Object(T.jsx)(g.Gc,{as:"p",mb:"16px",children:e("Please connect your wallet to continue")}),Object(T.jsx)(B.a,{})]})},J=n(831),Y=n(45),H=n(204),Q=n(148),K=n(841),Z=n(112),V=n(71),X=n(306),$=n(79),ee=n(28),te=n(903),ne=function(e){return Object(T.jsx)(g.v,Object(I.a)({endIcon:Object(T.jsx)(g.f,{color:"currentColor"})},e))},ce=function(){return Object(l.useContext)(F)},re=function(){var e=Object(l.useState)(""),t=Object(w.a)(e,2),n=t[0],c=t[1],r=Object(l.useState)([]),a=Object(w.a)(r,2),i=a[0],o=a[1],s=ce(),u=s.actions,d=s.minimumCakeRequired,j=s.allowance,f=Object(x.f)(),p=Object(Z.a)().toastSuccess,O=Object(V.b)(),h=Object(b.c)().account,v=Object(Y.d)(),S=Object(Y.b)(),A=Object(k.b)().t,P=Object(H.d)(),D=P.balance,L=P.fetchStatus===ee.b.Fetched&&D.gte(N),_=Object(Q.a)().callWithGasPrice;Object(l.useEffect)((function(){var e=function(){var e=Object(C.a)(y.a.mark((function e(){var t,n,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.s)(m.b);case 2:t=e.sent,n=t.data,c=G.map((function(e){if(n&&n[e])return Object(I.a)(Object(I.a)({},n[e]),{},{bunnyId:e})})),o(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();0===i.length&&e()}),[i]);var M=Object(J.a)({onRequiresApproval:function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.allowance(h,S.address);case 3:return t=e.sent,e.abrupt("return",t.gte(d));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),onApprove:function(){return _(v,"approve",[S.address,j.toString()])},onConfirm:function(){return _(S,"mintNFT",[n])},onApproveSuccess:function(){p(A("Enabled"),A("Press 'confirm' to mint this NFT"))},onSuccess:function(){p(A("Success"),A("You have minted your starter NFT")),O(Object(X.j)({account:h,collections:f})),u.nextStep()}}),F=M.isApproving,R=M.isApproved,q=M.isConfirmed,z=M.isConfirming,U=M.handleApprove,B=M.handleConfirm;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(g.Gc,{fontSize:"20px",color:"textSubtle",bold:!0,children:A("Step %num%",{num:1})}),Object(T.jsx)(g.gb,{as:"h3",scale:"xl",mb:"24px",children:A("Get Starter Collectible")}),Object(T.jsx)(g.Gc,{as:"p",children:A("Every profile starts by making a \u201cstarter\u201d collectible (NFT).")}),Object(T.jsx)(g.Gc,{as:"p",children:A("This starter will also become your first profile picture.")}),Object(T.jsx)(g.Gc,{as:"p",mb:"24px",children:A("You can change your profile pic later if you get another approved Pancake Collectible.")}),Object(T.jsx)(g.A,{mb:"24px",children:Object(T.jsxs)(g.B,{children:[Object(T.jsx)(g.gb,{as:"h4",scale:"lg",mb:"8px",children:A("Choose your Starter!")}),Object(T.jsx)(g.Gc,{as:"p",color:"textSubtle",children:A("Choose wisely: you can only ever make one starter collectible!")}),Object(T.jsx)(g.Gc,{as:"p",mb:"24px",color:"textSubtle",children:A("Cost: %num% PCM",{num:Object(E.formatUnits)(N)})}),i.map((function(e){return Object(T.jsx)(te.a,{name:"mintStarter",value:null===e||void 0===e?void 0:e.bunnyId,image:null===e||void 0===e?void 0:e.image.thumbnail,isChecked:n===(null===e||void 0===e?void 0:e.bunnyId),onChange:function(e){return c(e)},disabled:F||z||q||!L,children:Object(T.jsx)(g.Gc,{bold:!0,children:null===e||void 0===e?void 0:e.name})},null===e||void 0===e?void 0:e.name)})),!L&&Object(T.jsx)(g.Gc,{color:"failure",mb:"16px",children:A("A minimum of %num% PCM is required",{num:Object(E.formatUnits)(N)})}),Object(T.jsx)(K.b,{isApproveDisabled:null===n||q||z||R,isApproving:F,isConfirmDisabled:!R||q||!L,isConfirming:z,onApprove:U,onConfirm:B})]})}),Object(T.jsx)(ne,{onClick:u.nextStep,disabled:!q,children:A("Next Step")})]})},ae=n(111),ie=n(29),oe=n(61),se=n(81),ue=n(48),le=n(211),be=Object(v.e)(ae.a)(r||(r=Object(h.a)(["\n  color: ",";\n"])),(function(e){return e.theme.colors.primary})),de=v.e.div(a||(a=Object(h.a)(["\n  margin-bottom: 24px;\n"]))),je=function(){var e=Object(b.c)().library,t=Object(l.useState)(!1),n=Object(w.a)(t,2),c=n[0],r=n[1],a=Object(l.useState)(!1),i=Object(w.a)(a,2),o=i[0],s=i[1],u=Object(l.useState)(null),d=Object(w.a)(u,2),j=d[0],f=d[1],p=Object(l.useContext)(F),O=p.selectedNft,h=p.actions,v=Object(Y.u)(!1),S=Object(x.o)(),I=S.nfts,E=S.userNftsInitializationState;Object(l.useEffect)((function(){var e=function(){var e=Object(C.a)(y.a.mark((function e(){var t,n,c,r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((t=Array.from(I.reduce((function(e,t){return e.add(t.collectionAddress),e}),new Set))).length>0)){e.next=12;break}return e.next=5,v.NFT_ROLE();case 5:return n=e.sent,c=t.map((function(e){return{address:v.address,name:"hasRole",params:[n,e]}})),e.next=9,Object(ue.a)(le,c);case 9:r=e.sent,a=r.flat(),f(I.filter((function(e){return a[t.indexOf(e.collectionAddress)]})));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();E===se.e.INITIALIZED&&e()}),[I,v,E]);var N=Object(k.b)().t,P=Object(Z.a)(),G=P.toastError,D=P.toastSuccess,L=Object(Q.a)().callWithGasPrice,_=function(){var t=Object(C.a)(y.a.mark((function t(){var n,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(A.o)(O.collectionAddress,e.getSigner()),t.next=3,L(n,"approve",[Object(ie.t)(),O.tokenId]);case 3:return c=t.sent,D("".concat(N("Transaction Submitted"),"!"),Object(T.jsx)(oe.b,{txHash:c.hash})),s(!0),t.next=8,c.wait();case 8:t.sent.status?(D(N("Enabled"),N("Please progress to the next step.")),s(!1),r(!0)):(G(N("Error"),N("Please try again. Confirm the transaction and make sure you are paying enough gas!")),s(!1));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return 0===(null===j||void 0===j?void 0:j.length)?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(g.gb,{scale:"xl",mb:"24px",children:N("Oops!")}),Object(T.jsx)(g.Gc,{bold:!0,fontSize:"20px",mb:"24px",children:N("We couldn\u2019t find any Pancake Collectibles in your wallet.")}),Object(T.jsx)(g.Gc,{as:"p",children:N("You need a Pancake Collectible to finish setting up your profile. If you sold or transferred your starter collectible to another wallet, you\u2019ll need to get it back or acquire a new one somehow. You can\u2019t make a new starter with this wallet address.")})]}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(g.Gc,{fontSize:"20px",color:"textSubtle",bold:!0,children:N("Step %num%",{num:2})}),Object(T.jsx)(g.gb,{as:"h3",scale:"xl",mb:"24px",children:N("Set Profile Picture")}),Object(T.jsx)(g.A,{mb:"24px",children:Object(T.jsxs)(g.B,{children:[Object(T.jsx)(g.gb,{as:"h4",scale:"lg",mb:"8px",children:N("Choose collectible")}),Object(T.jsx)(g.Gc,{as:"p",color:"textSubtle",children:N("Choose a profile picture from the eligible collectibles (NFT) in your wallet, shown below.")}),Object(T.jsxs)(g.Gc,{as:"p",color:"textSubtle",mb:"24px",children:[N("Only approved Pancake Collectibles can be used."),Object(T.jsx)(be,{to:"".concat(m.a,"/collections"),style:{marginLeft:"4px"},children:N("See the list >")})]}),Object(T.jsx)(de,{children:(null===j||void 0===j?void 0:j.length)>0?j.filter((function(e){return e.location===se.d.WALLET})).map((function(e){return Object(T.jsx)(te.a,{name:"profilePicture",value:e.tokenId,image:e.image.thumbnail,isChecked:e.tokenId===O.tokenId,onChange:function(t){return h.setSelectedNft(t,e.collectionAddress)},children:Object(T.jsx)(g.Gc,{bold:!0,children:e.name})},"".concat(e.collectionAddress,"#").concat(e.tokenId))})):Object(T.jsx)(g.mc,{width:"100%",height:"64px"})}),Object(T.jsx)(g.gb,{as:"h4",scale:"lg",mb:"8px",children:N("Allow collectible to be locked")}),Object(T.jsx)(g.Gc,{as:"p",color:"textSubtle",mb:"16px",children:N("The collectible you've chosen will be locked in a smart contract while it\u2019s being used as your profile picture. Don't worry - you'll be able to get it back at any time.")}),Object(T.jsx)(g.v,{isLoading:o,disabled:c||o||null===O.tokenId,onClick:_,endIcon:o?Object(T.jsx)(g.j,{spin:!0,color:"currentColor"}):void 0,id:"approveStarterCollectible",children:N("Enable")})]})}),Object(T.jsx)(ne,{onClick:h.nextStep,disabled:null===O.tokenId||!c||o,children:N("Next Step")})]})},fe=n(904),pe=n.n(fe),Oe=n(891),me=function(){var e=ce(),t=e.teamId,n=e.actions,c=Object(k.b)().t,r=Object(Oe.b)().teams,a=function(e){return n.setTeamId(parseInt(e,10))},i=Object(l.useMemo)((function(){return pe()(Object.values(r))}),[r]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(g.Gc,{fontSize:"20px",color:"textSubtle",bold:!0,children:c("Step %num%",{num:3})}),Object(T.jsx)(g.gb,{as:"h3",scale:"xl",mb:"24px",children:c("Join a Team")}),Object(T.jsx)(g.Gc,{as:"p",mb:"24px",children:c("It won\u2019t be possible to undo the choice you make for the foreseeable future!")}),Object(T.jsx)(g.A,{mb:"24px",children:Object(T.jsxs)(g.B,{children:[Object(T.jsx)(g.gb,{as:"h4",scale:"lg",mb:"8px",children:c("Join a Team")}),Object(T.jsx)(g.Gc,{as:"p",color:"textSubtle",mb:"24px",children:c("There\u2019s currently no big difference between teams, and no benefit of joining one team over another for now. So pick whichever one you like!")}),i&&i.map((function(e){return Object(T.jsxs)(te.a,{name:"teams-selection",value:e.id,isChecked:t===e.id,image:"/images/teams/".concat(e.images.md),onChange:a,disabled:!e.isJoinable,children:[Object(T.jsx)(g.Gc,{bold:!0,children:e.name}),Object(T.jsxs)(g.eb,{children:[Object(T.jsx)(g.U,{mr:"8px"}),Object(T.jsx)(g.Gc,{children:e.users.toLocaleString()})]})]},e.name)}))]})}),Object(T.jsx)(ne,{onClick:n.nextStep,disabled:null===t,children:c("Next Step")})]})},xe=n(1711),he=n(1112),ve=n(50),ge=n(209),ke=n(49),Se=["timeout"],ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.timeout,c=void 0===n?1e4:n,r=Object(ke.a)(t,Se);return Promise.race([fetch(e,r),new Promise((function(t,n){setTimeout((function(){n(new Error("Request for ".concat(e," timed out after ").concat(c," milliseconds")))}),c)}))])},Ce=n(19),we=n(170),Ie=function(e){var t=e.account,n=e.teamId,c=e.selectedNft,r=e.minimumCakeRequired,a=e.allowance,i=e.onDismiss,o=Object(k.b)().t,s=Object(Y.u)(),u=Object(V.b)(),l=Object(Z.a)().toastSuccess,b=Object(Y.d)(),d=Object(Q.a)().callWithGasPrice,j=Object(J.a)({onRequiresApproval:function(){var e=Object(C.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.allowance(t,s.address);case 3:return n=e.sent,e.abrupt("return",n.gte(r));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),onApprove:function(){return d(b,"approve",[s.address,a.toJSON()])},onConfirm:function(){return d(s,"createProfile",[n,c.collectionAddress,c.tokenId])},onSuccess:function(){var e=Object(C.a)(y.a.mark((function e(n){var c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.receipt,e.next=3,u(Object(we.c)(t));case 3:i(),l(o("Profile created!"),Object(T.jsx)(oe.b,{txHash:c.transactionHash}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),f=j.isApproving,p=j.isApproved,O=j.isConfirmed,m=j.isConfirming,x=j.handleApprove,h=j.handleConfirm;return Object(T.jsxs)(g.Kb,{title:o("Complete Profile"),onDismiss:i,children:[Object(T.jsx)(g.Gc,{color:"textSubtle",mb:"8px",children:o("Submitting NFT to contract and confirming User Name and Team.")}),Object(T.jsxs)(g.eb,{justifyContent:"space-between",mb:"16px",children:[Object(T.jsx)(g.Gc,{children:o("Cost")}),Object(T.jsx)(g.Gc,{children:o("%num% PCM",{num:Object(E.formatUnits)(P)})})]}),Object(T.jsx)(K.b,{isApproveDisabled:O||m||p,isApproving:f,isConfirmDisabled:!p||O,isConfirming:m,onApprove:x,onConfirm:h})]})},Ae=n(158);!function(e){e.IDLE="idle",e.CREATED="created",e.NEW="new"}(u||(u={}));var Ee=v.e.div(i||(i=Object(h.a)(["\n  position: relative;\n  max-width: 240px;\n"]))),Ne=Object(v.e)(g.nb)(o||(o=Object(h.a)(["\n  padding-right: 40px;\n"]))),Pe=Object(v.e)(g.eb)(s||(s=Object(h.a)(["\n  align-items: center;\n  height: 24px;\n  justify-content: center;\n  margin-top: -12px;\n  position: absolute;\n  right: 16px;\n  top: 50%;\n  width: 24px;\n"]))),Ge=function(){var e=Object(l.useState)(!1),t=Object(w.a)(e,2),n=t[0],c=t[1],r=ce(),a=r.teamId,i=r.selectedNft,o=r.userName,s=r.actions,d=r.minimumCakeRequired,j=r.allowance,f=Object(k.b)().t,p=Object(b.c)().account,O=Object(Z.a)().toastError,m=Object(Ce.a)(),x=m.library,h=m.connector,v=Object(l.useState)(u.IDLE),S=Object(w.a)(v,2),I=S[0],A=S[1],N=Object(l.useState)(!1),G=Object(w.a)(N,2),D=G[0],L=G[1],_=Object(l.useState)(!1),M=Object(w.a)(_,2),F=M[0],R=M[1],q=Object(l.useState)(""),z=Object(w.a)(q,2),U=z[0],B=z[1],W=Object(l.useRef)(null),J=Object(H.d)(),Y=J.balance,Q=J.fetchStatus===ee.b.Fetched&&Y.gte(P),K=Object(g.kd)(Object(T.jsx)(Ie,{userName:o,selectedNft:i,account:p,teamId:a,minimumCakeRequired:d,allowance:j}),!1),V=Object(w.a)(K,1)[0],X=I===u.CREATED,$=Object(l.useState)(void 0),te=Object(w.a)($,2),ne=te[0],re=te[1],ae=Object(Ae.a)(ne,200);Object(l.useEffect)((function(){var e=function(){var e=Object(C.a)(y.a.mark((function e(t){var n,c,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,R(!0),ae){e.next=8;break}L(!1),B(""),W.current=null,e.next=22;break;case 8:return e.next=10,ye("".concat(ve.b,"/api/users/valid/").concat(ae),{method:"get",signal:t,timeout:3e4});case 10:if(n=e.sent,W.current=null,!n.ok){e.next=17;break}L(!0),B(""),e.next=22;break;case 17:return e.next=19,n.json();case 19:r=e.sent,L(!1),B(null===r||void 0===r||null===(c=r.error)||void 0===c?void 0:c.message);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),L(!1),e.t0 instanceof Error&&"AbortError"!==e.t0.name&&(B(f("Error fetching data")),console.error(e.t0));case 28:return e.prev=28,R(!1),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[0,24,28,31]])})));return function(t){return e.apply(this,arguments)}}();W.current&&W.current.abort(),W.current=new AbortController,e(W.current.signal)}),[ae,f]);var ie=function(){var e=Object(C.a)(y.a.mark((function e(){var t,n,c,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(!0),e.next=4,Object(ge.c)(h,x,p,o);case 4:return t=e.sent,e.next=7,fetch("".concat(ve.b,"/api/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:p,username:o,signature:t})});case 7:if(!(n=e.sent).ok){e.next=12;break}A(u.CREATED),e.next=16;break;case 12:return e.next=14,n.json();case 14:r=e.sent,O(f("Error"),null===r||void 0===r||null===(c=r.error)||void 0===c?void 0:c.message);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),O(e.t0 instanceof Error&&(null===e.t0||void 0===e.t0?void 0:e.t0.message)?e.t0.message:JSON.stringify(e.t0));case 21:return e.prev=21,R(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){p&&function(){var e=Object(C.a)(y.a.mark((function e(){var t,n,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(ve.b,"/api/users/").concat(p));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,t.ok?(c=Object(xe.a)(Object(he.default)(n.created_at),new Date),B(f("Created %dateCreated% ago",{dateCreated:c})),s.setUserName(n.username),A(u.CREATED),L(!0)):A(u.NEW),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),O(f("Error"),f("Unable to verify username"));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()()}),[p,A,L,B,s,O,f]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(g.Gc,{fontSize:"20px",color:"textSubtle",bold:!0,children:f("Step %num%",{num:4})}),Object(T.jsx)(g.gb,{as:"h3",scale:"xl",mb:"24px",children:f("Set Your Name")}),Object(T.jsx)(g.Gc,{as:"p",mb:"24px",children:f("This name will be shown in team leaderboards and search results as long as your profile is active.")}),Object(T.jsx)(g.A,{mb:"24px",children:Object(T.jsxs)(g.B,{children:[Object(T.jsx)(g.gb,{as:"h4",scale:"lg",mb:"8px",children:f("Set Your Name")}),Object(T.jsx)(g.Gc,{as:"p",color:"textSubtle",mb:"24px",children:f("Your name must be at least 3 and at most 15 standard letters and numbers long. You can\u2019t change this once you click Confirm.")}),I===u.IDLE?Object(T.jsx)(g.mc,{height:"40px",width:"240px"}):Object(T.jsxs)(Ee,{children:[Object(T.jsx)(Ne,{onChange:function(e){var t=e.target.value;s.setUserName(t),re(t)},isWarning:o&&!D,isSuccess:o&&D,minLength:3,maxLength:15,disabled:X,placeholder:f("Enter your name..."),value:o}),Object(T.jsxs)(Pe,{children:[F&&Object(T.jsx)(g.j,{spin:!0}),!F&&D&&o&&Object(T.jsx)(g.M,{color:"success"}),!F&&!D&&o&&Object(T.jsx)(g.bd,{color:"failure"})]})]}),Object(T.jsx)(g.Gc,{color:"textSubtle",fontSize:"14px",py:"4px",mb:"16px",style:{minHeight:"30px"},children:U}),Object(T.jsx)(g.Gc,{as:"p",color:"failure",mb:"8px",children:f("Only reuse a name from other social media if you're OK with people viewing your wallet. You can't change your name once you click Confirm.")}),Object(T.jsx)("label",{htmlFor:"checkbox",style:{display:"block",cursor:"pointer",marginBottom:"24px"},children:Object(T.jsxs)(g.eb,{alignItems:"center",children:[Object(T.jsx)("div",{style:{flex:"none"},children:Object(T.jsx)(g.J,{id:"checkbox",scale:"sm",checked:n,onChange:function(){return c(!n)}})}),Object(T.jsx)(g.Gc,{ml:"8px",children:f("I understand that people can view my wallet if they know my username")})]})}),Object(T.jsx)(g.v,{onClick:ie,disabled:!D||X||F||!n,children:f("Confirm")})]})}),Object(T.jsx)(g.v,{onClick:V,disabled:!D||!X,id:"completeProfileCreation",children:f("Complete Profile")}),!Q&&Object(T.jsx)(g.Gc,{color:"failure",mt:"16px",children:f("A minimum of %num% PCM is required",{num:Object(E.formatUnits)(P)})})]})},Te=function(){var e=Object(k.b)().t,t=Object(l.useContext)(F),n=t.isInitialized,c=t.currentStep;return Object(b.c)().account?n?0===c?Object(T.jsx)(re,{}):1===c?Object(T.jsx)(je,{}):2===c?Object(T.jsx)(me,{}):3===c?Object(T.jsx)(Ge,{}):null:Object(T.jsx)("div",{children:e("Loading...")}):Object(T.jsx)(W,{})};t.default=function(){var e=Object(b.c)().account,t=Object(f.d)(),n=t.isInitialized,c=t.isLoading,r=t.hasProfile;return Object(O.a)(),Object(x.c)(),!n||c?Object(T.jsx)(p.a,{}):e&&r?Object(T.jsx)(d.a,{to:"".concat(m.a,"/profile/").concat(e.toLowerCase())}):Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(R,{children:Object(T.jsxs)(j.b,{children:[Object(T.jsx)(U,{}),Object(T.jsx)(Te,{})]})})})}},820:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return d})),n.d(t,"m",(function(){return j})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"n",(function(){return O})),n.d(t,"d",(function(){return m})),n.d(t,"g",(function(){return x})),n.d(t,"o",(function(){return h})),n.d(t,"j",(function(){return v})),n.d(t,"i",(function(){return g})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return S})),n.d(t,"h",(function(){return y}));var c=n(1),r=n(21),a=n(71),i=n(105),o=n(34),s=n(28),u=n(306),l=function(){var e=Object(a.b)();Object(c.useEffect)((function(){e(Object(u.f)())}),[e])},b=function(e){var t=Object(a.b)();Object(c.useEffect)((function(){t(Object(u.e)(e))}),[t,e])},d=function(e){var t=Object(a.b)(),n=Object(r.d)((function(e){return e.nftMarket.data.loadingState})),o=n.latestPancakeBunniesUpdateAt,s=n.isUpdatingPancakeBunnies,l=m(e),b=l?l.map((function(e){return e.tokenId})):[],d=O(i.b),j=d?d.map((function(e){return e.tokenId})):[],f=l.length>0?l[0]:null,p=Object(c.useMemo)((function(){return f?{name:f.name,description:f.description,collection:{name:f.collectionName},image:f.image}:null}),[f]);return{isUpdatingPancakeBunnies:s,latestPancakeBunniesUpdateAt:o,fetchMorePancakeBunnies:function(n){t(Object(u.g)({bunnyId:e,existingTokensWithBunnyId:b,allExistingPBTokenIds:j,existingMetadata:p,orderDirection:n}))}}},j=function(){return Object(r.d)((function(e){return e.nftMarket.data.loadingState}))},f=function(){return Object(r.d)((function(e){return e.nftMarket.data.collections}))},p=function(e){var t=Object(o.j)(e)||"";return f()[t]},O=function(e){var t=Object(o.j)(e)||"";return Object(r.d)((function(e){return e.nftMarket.data.nfts[t]}))},m=function(e){var t=Object(r.d)((function(e){return e.nftMarket.data.nfts[i.b]}));return t?t.filter((function(t){return t.attributes[0].value===e&&t.marketData.isTradable})):[]},x=function(){return Object(r.d)((function(e){return e.nftMarket.initializationState}))},h=function(){return Object(r.d)((function(e){return e.nftMarket.data.user}))},v=function(e){var t=Object(r.d)((function(t){return t.nftMarket.data.filters[e]}));return t?t.activeFilters:{}},g=function(e){var t=Object(r.d)((function(t){return t.nftMarket.data.filters[e]}));return t?t.loadingState:s.b.Idle},k=function(e){var t=Object(r.d)((function(t){return t.nftMarket.data.filters[e]}));return t?t.ordering:{field:"currentAskPrice",direction:"asc"}},S=function(e){var t=Object(r.d)((function(t){return t.nftMarket.data.filters[e]}));return!t||t.showOnlyOnSale},y=function(e){return Object(r.d)((function(t){return t.nftMarket.data.activityFilters[e]}))||{typeFilters:[],collectionFilters:[]}}},831:function(e,t,n){"use strict";var c=n(3),r=n.n(c),a=n(10),i=n(8),o=n(5),s=n(1),u=n(83),l=n(44),b=n(112),d=n(13),j=n(114),f=n(61),p=n(0),O={approvalState:"idle",confirmState:"idle"},m=function(e,t){switch(t.type){case"requires_approval":return Object(o.a)(Object(o.a)({},e),{},{approvalState:"success"});case"approve_sending":return Object(o.a)(Object(o.a)({},e),{},{approvalState:"loading"});case"approve_receipt":return Object(o.a)(Object(o.a)({},e),{},{approvalState:"success"});case"approve_error":return Object(o.a)(Object(o.a)({},e),{},{approvalState:"fail"});case"confirm_sending":return Object(o.a)(Object(o.a)({},e),{},{confirmState:"loading"});case"confirm_receipt":return Object(o.a)(Object(o.a)({},e),{},{confirmState:"success"});case"confirm_error":return Object(o.a)(Object(o.a)({},e),{},{confirmState:"fail"});default:return e}};t.a=function(e){var t=e.onApprove,n=e.onConfirm,c=e.onRequiresApproval,o=e.onSuccess,x=void 0===o?u.noop:o,h=e.onApproveSuccess,v=void 0===h?u.noop:h,g=Object(d.b)().t,k=Object(l.c)().account,S=Object(s.useReducer)(m,O),y=Object(i.a)(S,2),C=y[0],w=y[1],I=Object(s.useRef)(c),A=Object(b.a)(),E=A.toastSuccess,N=A.toastError;return Object(s.useEffect)((function(){k&&I.current&&I.current().then((function(e){e&&w({type:"requires_approval"})}))}),[k,I,w]),{isApproving:"loading"===C.approvalState,isApproved:"success"===C.approvalState,isConfirming:"loading"===C.confirmState,isConfirmed:"success"===C.confirmState,hasApproveFailed:"fail"===C.approvalState,hasConfirmFailed:"fail"===C.confirmState,handleApprove:function(){var e=Object(a.a)(r.a.mark((function e(){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return n=e.sent,E("".concat(g("Transaction Submitted"),"!"),Object(p.jsx)(f.b,{txHash:n.hash})),w({type:"approve_sending"}),e.next=8,n.wait();case 8:(c=e.sent).status&&(w({type:"approve_receipt"}),v({state:C,receipt:c})),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),w({type:"approve_error"}),Object(j.b)(e.t0),N(g("Error"),g("Please try again. Confirm the transaction and make sure you are paying enough gas!"));case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),handleConfirm:function(){var e=Object(a.a)(r.a.mark((function e(){var t,c,a,i=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},w({type:"confirm_sending"}),e.prev=2,e.next=5,n(t);case 5:return c=e.sent,E("".concat(g("Transaction Submitted"),"!"),Object(p.jsx)(f.b,{txHash:c.hash})),e.next=9,c.wait();case 9:(a=e.sent).status&&(w({type:"confirm_receipt"}),x({state:C,receipt:a})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),w({type:"confirm_error"}),Object(j.b)(e.t0),N(g("Error"),g("Please try again. Confirm the transaction and make sure you are paying enough gas!"));case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}()}}},841:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c,r,a,i,o,s=n(9),u=(n(1),n(6)),l=n(2),b=n(13),d=n(0);!function(e){e.ROW="row",e.SEQUENTIAL="sequential"}(o||(o={}));var j=u.e.div(c||(c=Object(s.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr;\n  justify-content: center;\n\n  "," {\n    grid-template-columns: 1fr 24px 1fr;\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),f=Object(u.e)(l.v)(r||(r=Object(s.a)(["\n  width: 100%;\n\n  "," {\n    min-width: 160px;\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),p={width:"24px",color:"textDisabled"},O=Object(u.e)(l.P).attrs(p)(a||(a=Object(s.a)(["\n  display: none;\n\n  "," {\n    display: block;\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),m=Object(u.e)(l.N).attrs(p)(i||(i=Object(s.a)(["\n  display: block;\n\n  "," {\n    display: none;\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),x=Object(d.jsx)(l.j,{spin:!0,color:"currentColor"});t.b=function(e){var t=e.isApproveDisabled,n=e.isApproving,c=e.isConfirming,r=e.isConfirmDisabled,a=e.onApprove,i=e.onConfirm,s=e.buttonArrangement,u=void 0===s?o.ROW:s,p=e.confirmLabel,h=e.confirmId,v=Object(b.b)().t,g=null!==p&&void 0!==p?p:v("Confirm");return u===o.ROW?Object(d.jsxs)(j,{children:[Object(d.jsx)(l.q,{children:Object(d.jsx)(f,{disabled:t,onClick:a,endIcon:n?x:void 0,isLoading:n,children:v(n?"Enabling":"Enable")})}),Object(d.jsxs)(l.eb,{justifyContent:"center",children:[Object(d.jsx)(O,{}),Object(d.jsx)(m,{})]}),Object(d.jsx)(l.q,{children:Object(d.jsx)(f,{id:h,onClick:i,disabled:r,isLoading:c,endIcon:c?x:void 0,children:c?v("Confirming"):g})})]}):Object(d.jsx)(d.Fragment,{children:t?Object(d.jsx)(l.q,{children:Object(d.jsx)(f,{id:h,onClick:i,disabled:r,isLoading:c,endIcon:c?x:void 0,children:c?v("Confirming"):g})}):Object(d.jsx)(l.q,{children:Object(d.jsx)(f,{onClick:a,endIcon:n?x:void 0,isLoading:n,children:v(n?"Enabling":"Enable")})})})}},891:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var c=n(1),r=n(21),a=n(71),i=n(206),o=function(e){var t=Object(r.d)((function(t){return t.teams.data[e]})),n=Object(a.b)();return Object(c.useEffect)((function(){n(Object(i.b)(e))}),[e,n]),t},s=function(){var e=Object(r.d)((function(e){return e.teams})),t=e.isInitialized,n=e.isLoading,o=e.data,s=Object(a.b)();return Object(c.useEffect)((function(){s(Object(i.c)())}),[s]),{teams:o,isInitialized:t,isLoading:n}}},902:function(e,t,n){"use strict";var c=n(1),r=n(438),a=n.n(r),i=n(71),o=n(306),s=n(820),u=n(266),l=n(305),b=n(81),d=n(44);t.a=function(){var e,t=Object(i.b)(),n=Object(d.c)().account,r=Object(l.d)(),j=r.profile,f=r.isInitialized,p=r.isLoading,O=Object(s.o)().userNftsInitializationState,m=Object(s.f)(),x=null===j||void 0===j?void 0:j.tokenId,h=null===j||void 0===j||null===(e=j.tokenId)||void 0===e?void 0:e.toString(),v=null===j||void 0===j?void 0:j.collectionAddress,g=Object(c.useMemo)((function(){return x?{tokenId:h,collectionAddress:v,nftLocation:b.d.PROFILE}:null}),[h,v,x]),k=Object(u.a)(h),S=n&&O===b.e.UNINITIALIZED&&f&&!p,y=k!==h&&!p&&n;Object(c.useEffect)((function(){!S&&!y||a()(m)||t(Object(o.j)({account:n,collections:m,profileNftWithCollectionAddress:g}))}),[t,n,S,y,h,m,g])}},903:function(e,t,n){"use strict";var c,r,a,i,o=n(5),s=n(49),u=n(9),l=(n(1),n(6)),b=n(2),d=n(0),j=["name","value","isChecked","image","onChange","disabled","children"],f=l.e.label(c||(c=Object(u.a)(["\n  cursor: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  opacity: ",";\n"])),(function(e){return e.isDisabled?"not-allowed":"pointer"}),(function(e){return e.isDisabled?"0.6":"1"})),p=l.e.div(r||(r=Object(u.a)(["\n  align-items: center;\n  display: flex;\n  flex-grow: 1;\n  height: 80px;\n  padding: 8px 16px;\n"]))),O=l.e.div(a||(a=Object(u.a)(["\n  margin-left: 16px;\n"]))),m=l.e.div(i||(i=Object(u.a)(["\n  align-self: stretch;\n  background-image: url('","');\n  background-size: contain;\n  background-position: center;\n  background-repeat: no-repeat;\n  flex: none;\n  width: 80px;\n"])),(function(e){return e.src}));t.a=function(e){var t=e.name,n=e.value,c=e.isChecked,r=void 0!==c&&c,a=e.image,i=e.onChange,u=e.disabled,l=e.children,x=Object(s.a)(e,j);return Object(d.jsx)(b.A,Object(o.a)(Object(o.a)({isSuccess:r,isDisabled:u,mb:"16px"},x),{},{children:Object(d.jsxs)(f,{isDisabled:u,children:[Object(d.jsxs)(p,{children:[Object(d.jsx)(b.gc,{name:t,checked:r,value:n,onChange:function(e){return i(e.target.value)},disabled:u,style:{flex:"none"}}),Object(d.jsx)(O,{children:l})]}),Object(d.jsx)(m,{src:a})]})}))}}}]);
//# sourceMappingURL=25.f0729d3b.chunk.js.map